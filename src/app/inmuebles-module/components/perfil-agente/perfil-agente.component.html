<div class="container pt-5 px-5">
  <div class="row mb-4">
    <div class="col">
      <span class="h1 me-4 font-playfair">Perfil del agente</span>
    </div>
  </div>

  <div *ngIf="isLoading" class="d-flex justify-content-center">
    <div style="width: 3rem; height: 3rem;" class="spinner-grow text-warning" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <div  *ngIf="usuario">


  <div class="row mb-5 justify-content-center">
    <div class="col-3">
      <img [src]="profileUrl | async" class="rounded-circle float-end image-resize shadow" height="150px" width="150px" alt="">
    </div>

    <div class="col-4 align-self-center">
      <h2>{{ usuario.nombre }} {{ usuario.apellido }}</h2>
      <h5 class="text-muted">{{ usuario.titulo }}</h5>
      <!-- <div class="mb-3">
        <label for="formFileSm" class="form-label">Small file input example</label>
        <input (change)="uploadFile($event)" class="form-control form-control-sm" id="formFileSm" type="file">
      </div> -->
    <!-- <div>{{ uploadPercent | async }}</div> -->
    <!-- <a [href]="downloadURL | async">{{ downloadURL | async }}</a> -->
    </div>
  </div>
  <div class="row mb-4 g-5">
    <div class="col-12 col-xl-6">
      <div class="rounded shadow pb-2">
        <div class="h3 font-playfair rounded-top text-white fondo-dorado bg-gradient py-3 mb-3 px-4">Datos personales</div>
        <div class="px-4">
          <p>
            Agente ubicado en la ciudad de {{ usuario.ciudad }}, estado {{ usuario.estado }}, {{ usuario.pais }}.
          </p>

          <p *ngIf="usuario.infoAdicional"><span class="fw-bold">Información adicional: </span>{{ usuario.infoAdicional }}</p>
        </div>
      </div>

    </div>
    <div class="col-12 col-xl-6">
      <div class="rounded shadow pb-2">
        <div class="h3 font-playfair rounded-top text-white fondo-dorado bg-gradient py-3 mb-3 px-4">Información de contacto</div>
        <div class="px-4">
          <p><span class="fw-bold">Email: </span>{{ usuario.email }}</p>
          <p *ngIf="usuario.telefono1"><span class="fw-bold">Teléfono: </span>{{ usuario.telefono1 }}</p>
          <p *ngIf="usuario.telefono2"><span class="fw-bold">Teléfono secundario: </span>{{ usuario.telefono2 }}</p>
        </div>
      </div>

    </div>
  </div>
  <div class="row">
    <div class="col pt-5 ps-4 pe-4">
      <h1 class="mb-4 font-playfair">Inmuebles del agente:</h1>
      <div class="row row-cols-1 row-cols-md-auto justify-content-evenly">
        <!-- row row-cols-1 row-cols-sm-2 row-cols-md-3 rows-cols-lg-4 -->
        <div *ngFor="let inmueble of inmuebles; let i = index" class="col mb-4">
          <div class="card card-hover rounded-0 border-0 h-100" style="min-width: 16rem; max-width: 20rem;">
            <!-- style="width: 16rem;" -->
            <!-- <img src="https://da28rauy2a860.cloudfront.net/completehome/wp-content/uploads/2021/01/21163931/001-Macquarie-zenith-facades_DSC8047_v4a-R.jpg" class="card-img-top rounded-0" alt="..."> -->

            <div [attr.id]="'carousel'+i" class="carousel slide" data-bs-interval="false" data-bs-ride="carousel">
              <div class="carousel-inner">
                <!-- FIJAR TAMAÑO DE TARJETAS -->
                  <div *ngIf="!inmueble.imagenesURL[0]" class="carousel-item active">
                    <img src="https://megastorecelulares.com/img/not-found.15ffdca4.png" class="card-img-top rounded-0 d-block cover" alt="...">
                  </div>
                  <div *ngIf="inmueble.imagenesURL[0]" class="carousel-item active">
                    <img [src]="inmueble.imagenesURL[0]" class="card-img-top rounded-0 d-block cover" alt="...">
                  </div>
                  <div *ngIf="inmueble.imagenesURL[1]" class="carousel-item">
                    <img [src]="inmueble.imagenesURL[1]" class="card-img-top rounded-0 d-block cover" alt="...">
                  </div>
                  <div *ngIf="inmueble.imagenesURL[1]" class="carousel-item">
                    <img [src]="inmueble.imagenesURL[2]" class="card-img-top rounded-0 d-block cover" alt="...">
                  </div>

              </div>
              <button class="carousel-control-prev zi" type="button" [attr.data-bs-target]="'#carousel'+i" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Anterior</span>
              </button>
              <button class="carousel-control-next zi" type="button" [attr.data-bs-target]="'#carousel'+i" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Siguiente</span>
              </button>
            </div>
              <div class="row border-bottom py-2 px-2 mx-0">
                <div class="col border-end">
                  <div class="row text-center">
                    <fa-icon class="text-secondary" [icon]="faBed" size="lg"></fa-icon>
                  </div>
                  <div class="row text-center">
                    <span class="fw-light form-text">{{inmueble.habitaciones}}</span>
                  </div>
                </div>
                <div class="col border-end">
                  <div class="row text-center">
                    <fa-icon class="text-secondary" [icon]="faBath" size="lg"></fa-icon>
                  </div>
                  <div class="row text-center">
                    <span class="fw-light form-text">{{inmueble.banos}}</span>
                  </div>
                </div>
                <div class="col border-end">
                  <div class="row text-center">
                    <fa-icon class="text-secondary" [icon]="faRuler" size="lg"></fa-icon>
                  </div>
                  <div class="row text-center">
                    <span class="fw-light form-text">{{inmueble.metrosTotales}}m<sup>2</sup></span>
                  </div>
                </div>
                <div class="col">
                  <div class="row text-center">
                    <fa-icon class="text-secondary" [icon]="faCar" size="lg"></fa-icon>
                  </div>
                  <div class="row text-center">
                    <span class="fw-light form-text">{{inmueble.estacionamientos}}</span>
                  </div>
                </div>
              </div>
              <div class="card-body ">
              <a class="stretched-link text-reset text-decoration-none" [routerLink]="'/inmuebles/inmueble/'+inmueble.id">
                <h4 class="card-title mb-0">$ {{inmueble.precio | number}}</h4>
              </a>
              <p class="card-text">{{inmueble.tipoInmueble}} en {{inmueble.operacion}} en {{inmueble.zona}}.</p>
              <p class="card-text"><small>{{inmueble.ciudad}}, {{inmueble.pais}}</small></p>


            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
</div>

